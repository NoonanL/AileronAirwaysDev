<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aileron Airways ETT</title>
<link href="StyleSheet.css"  rel="styleSheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

</head>
<body>

<div class="main">
    <header>
        <img src="images/AileronIcon.png" class="imgcontainer">
        <h1 style="font-size: 32px; text-decoration: none; text-align: center";> Timelines</h1>
    </header>
    <div class="row">
        <div class="col-12">
            <button id="myBtn" class="button">Create new timeline</button>
                    <div id="myModal" class="modal">
                        <div style ="card container centre" class="modal-content">
                            <div style ="height:50px;" class="modal-header">
                                <span class="close">&times;</span>
                            </div>
                            <div class="modal-body">
                                    <form action = "/timelineRegisterServlet" method = "post">
                                        <!--Timeline Id: <input type = "text" name = "timeline_id" required>-->
                                        <!--<br />-->
                                        Timeline Title: <input type = "text" name = "timeline_title" required/>
                                        <br />
                                        <input type = "submit" value = "Create new timeline" />
                                    </form>
                                    <br>
                            </div>
                            <div style ="height:50px;" class="modal-footer"></div>
                        </div>
                    </div>
            <br>
        </div>
        <div class="row">

            <form id="search" style="text-align: center" action="/searchTimelinesServlet">
                <input type="text" placeholder="Search.." name="searchBox" id="searchBox">
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>

        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-12">
            <div id="tableDiv"> </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
    //function to build a timelines accordion with timeline data from the backend
    buildTable();
    var servlet = "/timelineRegisterServlet"

    function buildTable() {
        console.log("Building a timeline table");
        // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response JSON...

        $.get(servlet, function (responseJson) {
            // Create HTML <ul> element and append it to HTML DOM element with ID "tableDiv".
            var $tableDiv = $("<dl>").appendTo($("#tableDiv"));
            //iterate over the JSON array of timeline data passed from backend for each object append this to the page
            $.each(responseJson, function (index, product) {
                //this is the object builder
                var timelineTitle = $("<h2 />", {
                    text: "Title: " + product.title,
                    "class": "timelineTitle"
                });
                //This link passes a variable in the URL called timelineID which can be used to query the api on events.html
                var timelineLink=$("<a/>",{
                    href:"Events.html" + "?timelineID=" + product.id,
                    text:"View Timeline"
                });
                var timelineDateTime = $("<h3 />", {
                    text: "Date Created: " + product.dateTime,
                    "class": "timelineDateTIme"
                });
                var listItem = $("<dt />", {
                    text:""
                });
                listItem.append(timelineTitle);
                listItem.append(timelineDateTime);
                listItem.append(timelineLink);
                $("#tableDiv").append(listItem);
            });
        })
    }
    function search(){
        servlet = "searchTimelinesServlet"
    }


</script>
<script src="nav.js"> </script>
<script src="modal.js"> </script>






