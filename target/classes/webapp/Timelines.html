<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aileron Airways ETT</title>
<link href="StyleSheet.css"  rel="styleSheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

</head>
<body>

<div class="main">
    <header>
        <img src="images/AileronIcon.png" class="imgcontainer">
        <h1 style="font-size: 32px; text-decoration: none; text-align: center";> Timelines</h1>
    </header>
    <div class="row">
        <div class="col-12">
            <form action="/timelineRegisterServlet" method = "post">
                <!--Timeline Id: <input type = "text" name = "timeline_id" required>-->
                <!--<br />-->
                Timeline Title: <input type = "text" name = "timeline_title" required/>
                <br />
                <input type = "submit" value = "Create new timeline" />
            </form>
            <button id="myBtn" class="button">Create new timeline</button>

            <br>
        </div>
        <div class="row">

            <form style="text-align: center" action="/searchTimelinesServlet" method="get">
                <input type="text" placeholder="Search.." name="searchBox">
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>

        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-12">
            <div id="tableDiv"> </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
    //function to build a timelines accordion with timeline data from the backend
    buildTable();
    function buildTable() {
        console.log("Building a timeline table");
        // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response JSON...
        $.get("/timelineRegisterServlet", function (responseJson) {
            // Create HTML <ul> element and append it to HTML DOM element with ID "tableDiv".
            var $tableDiv = $("<dl>").appendTo($("#tableDiv"));
            //iterate over the JSON array of timeline data passed from backend for each object append this to the page
            $.each(responseJson, function (index, product) {
                //this is the object builder
                var timelineTitle = $("<h2 />", {
                    text: "Title: " + product.title,
                    "class": "timelineTitle"
                });
                //instantiate variable with the timeline's ID
                var timelineId = product.id;
                //instantiate a variable with the timeline's Date and Time of creation
                var timelineDateTime = $("<h3 />", {
                    text: "Date: " + product.dateTime,
                    "class": "timelineDateTIme"
                });
                // -----------ADDING THE BUTTON FOR OPENING A TIMELINE----------------
                //build a form tag
                var timelineForm=$("<form/>",{
                    //fill the form with an action
                    action:"/selectTimelineServlet",
                    method: "get"
                });
                //make an invisible input field with the value of the timeline's ID
                var timelineIDinput=$("<input/>",{
                    value:timelineId,
                    name:"timelineId",
                    hidden:""
                });
                //make the timeline button with type submit
                var timelineButton=$("<button/>",{
                    "class":"button",
                    type:"submit",
                    text:"View Timeline"
                });
                //append the input and button to the form tag
                timelineForm.append(timelineIDinput);
                timelineForm.append(timelineButton);
                // ---------------------ADDING A BUTTON FOR DELETING TIMELINES------------------
                //build a form tag for deleting timelines
                var deletetimelineForm=$("<form/>",{
                    //fill the form with an action
                    "class":"confirmRequired",
                    action:"/deleteTimelineServlet",
                    method: "post"
                });
                //make an invisible input field with the value of the timeline's ID
                var deletetimelineIDinput=$("<input/>",{
                    value:timelineId,
                    name:"timelineId",
                    hidden:""
                });
                //make the timeline button with type submit
                var deletetimelineButton=$("<button/>",{
                    "class":"button",
                    type:"submit",
                    text:"Delete Timeline"
                });
                //append the input and button to the form tag

                deletetimelineForm.append(deletetimelineIDinput);
                deletetimelineForm.append(deletetimelineButton);

                //-------------------------------------------------------------
                //create a list item variable
                var listItem = $("<dt />", {
                    text:""
                });
                //append each timeline's data to a list item tag
                listItem.append(timelineTitle);
                listItem.append(timelineDateTime);
                listItem.append(timelineForm);
                listItem.append(deletetimelineForm);
                //add each listItem instance to the table
                $("#tableDiv").append(listItem);
            });
        })
    }
</script>
<script src="nav.js"> </script>
<script src="modal.js"> </script>
<script src="confirmRequired.js"></script>





