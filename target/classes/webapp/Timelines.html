<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aileron Airways ETT</title>
<link href="StyleSheet.css"  rel="styleSheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>

</head>
<body>
<!-- Span element to open the sidenav -->
<span onclick="openNav()" class="openbtn" style="Top:0px; Left:0; font-size: 40px; color: white">&#9776;</span>
<div class="main">
    <header>

        <div class="aboutUsBanner">
            <img src="Images/Banner.jpeg" style="width:100%;">
            <div class="top-left">
                      <h2> Event Timeline Tool - All Timelines</h2> 
            </div>
            <div class="bottom-right">
	                   <img src="images/AileronLogoThumb.png" style="width:100%;">
            </div>
        </div>



    </header>

    <div class="row">
        <div class="col-12">
            <button id="myBtn" class="button">Create New Timeline</button>
                    <div id="myModal" class="modal">
                        <div id="boxshadow" style ="card container centre" class="modal-content">
                            <div style ="height:50px;" class="modal-header">
                                <span class="close">&times;</span>
                            </div>
                            <div class="modal-body">
                                    <form action = "/timelineRegisterServlet" method = "post">
                                        Timeline Id: <input type = "text" name = "timeline_id">
                                        <br />
                                        Timeline Title: <input type = "text" name = "timeline_title" />
                                        <br />
                                        <input type = "submit" value = "Create new timeline" />
                                    </form>
                                    <br>
                            </div>
                            <div style ="height:50px;" class="modal-footer"></div>
                        </div>
                    </div>
            <br>
        </div>    
    </div>
    <br>

    <div class="row">
        <div class="col-12">
            <div id="tableDiv"> </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
    //function to build a timelines accordion with timeline data from the backend
    buildTable();
    function buildTable() {
        console.log("Building a timeline table");
        // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response JSON...
        $.get("/timelineRegisterServlet", function (responseJson) {
            // Create HTML <ul> element and append it to HTML DOM element with ID "tableDiv".
            var $tableDiv = $("<dl>").appendTo($("#tableDiv"));
            //iterate over the JSON array of timeline data passed from backend for each object append this to the page
            $.each(responseJson, function (index, product) {
                //this is the object builder
                var timelineID = $("<h2 />", {
                    text: "Title: " + product.title,
                    "class": timelineID
                });
                var timelineTitle = $("<h3 />", {
                    text: "ID: " + product.id,
                    "class": timelineTitle
                });
                var listItem = $("<dt />", {
                    text: ""
                });
                listItem.append(timelineID);
                listItem.append(timelineTitle);
                $("#tableDiv").append(listItem);
            });
        })
    }


    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.display === "block") {
                panel.style.display = "none";
            } else {
                panel.style.display = "block";
            }
        });
    }
</script>
<script src="nav.js"> </script>
<script src="modal.js"> </script>






