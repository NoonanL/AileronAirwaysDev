<!DOCTYPE HTML>
<html>
<head>
    <title>Events</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,width=device-width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
  <style>
    body, html {
      font-family: arial, sans-serif;
      font-size: 11pt;
    }
      
  </style>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css">
  
</head>
<body>

<span class="openbtn" onclick="openNav()" style="font-size: 40px; color: #1a90c7">&#9776;</span>
<!--Nav.js should really be handling this. This is a temporary fix-->
<div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="font-size: 40px">&times;</a>
    <a href="index.html">Home</a>
    <a href ="Timelines.html">Timelines</a>
    <a href="Events.html">Events</a>
    <a href="EventDetails.html">Event Details</a>
    <a href="AddEvent.html">Add Event</a>
</div>

<div class="main">

<img src="images/AileronIcon.png" class="imgcontainer">
<h1 style="font-size: 32px; text-decoration: none; text-align: center";> View Events</h1>

</div>

<!-- 1 -->
<link title="timeline-styles" rel="stylesheet" href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">

<!-- 2 -->
<script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
<div id="timelineboxshadow">
<div id='timeline-embed' style="width: 100%; height: 600px;"></div>
</div>
<!-- 3 -->
<script type="text/javascript">
    console.log("Getting Events by id");
    var timeline_json = {
        "events": []}
           // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response JSON...
           $.get("/linkedEventsServlet", function (responseJson) {
               //iterate over the JSON array of timeline data passed from backend for each object append this to the page
               $.each(responseJson, function (index, product) {
                   // console.log(product.title + "<br>");
                   // console.log(product.description + "<br>");
                   // console.log(product.eventDateTime + "<br>");
                   // console.log(product.location + "<br>");

                   timeline_json.events.push({
                       "start_date": {
                           "month": product.MM,
                           "day": product.dd,
                           "year": product.yyyy
                       },
                       "text": {
                           "headline": product.title,
                           "text": product.description+"<form action='/selectEventServlet' method = 'get'> <input value="+product.id+" name='eventId' hidden> </input> <input class='button' type = 'submit' value = 'view event details' /> </form>",

                       }
                   });

                    console.log(timeline_json);
                   window.timeline = new TL.Timeline('timeline-embed', timeline_json);
               });
           })

    var additionalOptions = {
        default_bg_color: {r:16, g:171, b:150},
        hash_bookmark:true,

    }

</script>
</body>
</html>

<script>

    //function to fetch the timelineEvents
    getTimelineEvents();
    function getTimelineEvents() {
        console.log("Getting Events by id");
        // Execute Ajax GET request on URL of "someservlet" and execute the following function with Ajax response JSON...
        $.get("/linkedEventsServlet", function (responseJson) {
            //iterate over the JSON array of timeline data passed from backend for each object append this to the page
            $.each(responseJson, function (index, product) {
                console.log(product.title + "<br>");
                console.log(product.description + "<br>");
                console.log(product.eventDateTime + "<br>");
                console.log(product.location + "<br>");
                console.log(product.dd + "<br>");
                console.log(product.MM + "<br>");
                console.log(product.yyyy + "<br>");
                console.log(product.hh + "<br>");
                console.log(product.mm + "<br>");
            });
        })
    }
</script>




